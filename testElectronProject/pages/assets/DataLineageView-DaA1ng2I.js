import{G as p}from"./index-3eR4IEZC.js";import{_,d as f,c as g,a as m,e as d,l as w,b,w as i,r as y,t as h,F as k,o as v,f as C,g as B,h as I,i as u,j as c}from"./index-C6GkaOyR.js";const E=f({name:"DataLineageView",setup(){v(()=>{const t={nodes:[{id:"orders",label:"orders"},{id:"users",label:"users"},{id:"tmp_raw_orders",label:"tmp_raw_orders"},{id:"user_stats",label:"user_stats (CTE)"},{id:"latest_orders",label:"latest_orders (CTE)"},{id:"user_orders_wide",label:"user_orders_wide"},{id:"user_orders_staging",label:"user_orders_staging"},{id:"tmp_final_orders",label:"tmp_final_orders"}],edges:[{source:"orders",target:"tmp_raw_orders"},{source:"users",target:"tmp_raw_orders"},{source:"tmp_raw_orders",target:"user_stats"},{source:"tmp_raw_orders",target:"latest_orders"},{source:"user_stats",target:"user_orders_wide"},{source:"latest_orders",target:"user_orders_wide"},{source:"users",target:"user_orders_wide"},{source:"user_orders_staging",target:"user_orders_wide"},{source:"tmp_raw_orders",target:"tmp_final_orders"}]},a=new p({container:"table-graph",width:document.getElementById("table-graph").clientWidth,height:document.getElementById("table-graph").clientHeight,layout:{type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},modes:{default:["drag-canvas","zoom-canvas","drag-node"]},plugins:[{type:"fullscreen",key:"fullscreen"},function(){const l=this;return{type:"toolbar",key:"toolbar",position:"top-left",onClick:s=>{const n=l.getPluginInstance("fullscreen");s==="request-fullscreen"&&n.request(),s==="exit-fullscreen"&&n.exit()},getItems:()=>[{id:"request-fullscreen",value:"request-fullscreen"},{id:"exit-fullscreen",value:"exit-fullscreen"}]}}],defaultNode:{type:"rect",size:[120,40],style:{fill:"#e0f0ff",stroke:"#1890ff",radius:6},labelCfg:{style:{fontSize:14,fill:"#000"}}},defaultEdge:{style:{stroke:"#999",endArrow:!0},labelCfg:{style:{fill:"#666",fontSize:12}}}});a.data(t),a.render()});const e=C("/Users/lihaomin/projects/GitHub/test/scripts/sqlParse/data"),o=B({analysisBtn:async()=>{window.ipc.sendInvoke("toMain",{event:"data-lineage-analysis",params:e.value}).then(t=>{t&&console.log(t)})},selectFolder:async()=>{window.ipc&&await window.ipc.sendInvoke("toMain",{event:"select-folder"}).then(t=>{t&&(e.value=t[0])})},path:e});return{...I(o)}}});function V(e,r,o,t,a,l){const s=y("el-button");return u(),g(k,null,[m(s,{onClick:e.selectFolder},{default:i(()=>r[0]||(r[0]=[c("选择文件夹")])),_:1},8,["onClick"]),d("p",null,"绝对路径："+h(e.path),1),e.path?(u(),w(s,{key:0,type:"",onClick:e.analysisBtn},{default:i(()=>r[1]||(r[1]=[c("分析")])),_:1},8,["onClick"])):b("",!0),r[2]||(r[2]=d("div",{id:"table-graph",class:"w-full h-full"},null,-1))],64)}const F=_(E,[["render",V],["__scopeId","data-v-a7655db4"]]);export{F as default};
