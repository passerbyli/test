import{r as _,G as h}from"./index-3eR4IEZC.js";import{_ as T,o as R,c as w,j as f,e as x,F as N,i as I}from"./index-C6GkaOyR.js";const L={__name:"Test2View",setup(C){const l=[{name:"customers",fields:["credit_limit","cust_email","customer_id"]},{name:"orders",fields:["order_id","customer_id","order_total","sales_rep_id"]},{name:"INSERT-SELECT-1",fields:["oid","cid","ottl","sid","cl","cem","RelationRows"]},{name:"small_orders",fields:["oid","ottl","sid","cid","cl","cem","RelationRows"]},{name:"medium_orders",fields:["oid","ottl","sid","cid","cl","cem","RelationRows"]},{name:"special_orders",fields:["oid","ottl","sid","cid","cl","cem","RelationRows"]},{name:"large_orders",fields:["oid","ottl","sid","cid","cl","cem","RelationRows"]}],E=[{source:"orders.order_id",target:"INSERT-SELECT-1.oid"},{source:"orders.customer_id",target:"INSERT-SELECT-1.cid"},{source:"orders.order_total",target:"INSERT-SELECT-1.ottl"},{source:"orders.sales_rep_id",target:"INSERT-SELECT-1.sid"},{source:"customers.credit_limit",target:"INSERT-SELECT-1.cl"},{source:"customers.cust_email",target:"INSERT-SELECT-1.cem"},{source:"INSERT-SELECT-1.oid",target:"small_orders.oid"},{source:"INSERT-SELECT-1.cid",target:"small_orders.cid"},{source:"INSERT-SELECT-1.ottl",target:"small_orders.ottl"},{source:"INSERT-SELECT-1.oid",target:"medium_orders.oid"},{source:"INSERT-SELECT-1.oid",target:"special_orders.oid"},{source:"INSERT-SELECT-1.oid",target:"large_orders.oid"}];return R(()=>{const u=l.map((e,t)=>{const r=(e.fields.length+1)*20+10;return{id:e.name,label:e.name,type:"table-node",size:[200,r],fields:e.fields,style:{fill:"#fefefe",stroke:"#5b8ff9"}}}),p=E.map(({source:e,target:t})=>{var r,o;return{source:e.split(".")[0],target:t.split(".")[0],sourceAnchor:((r=l.find(d=>d.name===e.split(".")[0]))==null?void 0:r.fields.indexOf(e.split(".")[1]))+1,targetAnchor:((o=l.find(d=>d.name===t.split(".")[0]))==null?void 0:o.fields.indexOf(t.split(".")[1]))+1}});_("table-node",{draw(e,t){const{label:r,fields:o}=e,d=200,a=20,i=(o.length+1)*a+10,S=t.addShape("rect",{attrs:{x:-200/2,y:-i/2,width:d,height:i,radius:4,stroke:"#5B8FF9",fill:"#fff"},name:"table-box",draggable:!0});return t.addShape("text",{attrs:{text:r,x:0,y:-i/2+a,fontSize:14,fill:"#000",textAlign:"center",textBaseline:"middle"},name:"table-title"}),o.forEach((m,n)=>{t.addShape("circle",{attrs:{x:-200/2+6,y:-i/2+a*(n+2),r:3,fill:"#5B8FF9"},name:`anchor-${n+1}`}),t.addShape("text",{attrs:{text:m,x:-200/2+16,y:-i/2+a*(n+2),fontSize:12,fill:"#333",textAlign:"start",textBaseline:"middle"},name:`field-${m}`})}),S},getAnchorPoints(e){const{fields:t}=e;return t.map((o,d)=>[0,(d+2)/(t.length+3)])}},"single-node");const c=new h({container:"field-graph",width:window.innerWidth,height:window.innerHeight,layout:{type:"dagre",rankdir:"LR",nodesep:50,ranksep:100},defaultNode:{type:"table-node"},defaultEdge:{style:{stroke:"#999",endArrow:!0}},modes:{default:["drag-canvas","zoom-canvas","drag-node"]}});c.data({nodes:u,edges:p}),c.render()}),(g,s)=>(I(),w(N,null,[s[0]||(s[0]=f("11 ")),s[1]||(s[1]=x("div",{id:"field-graph",class:"w-full h-full"},null,-1)),s[2]||(s[2]=f("22 "))],64))}},k=T(L,[["__scopeId","data-v-232face8"]]);export{k as default};
